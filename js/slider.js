const timeArray = [
  "2012MM01",
  "2012MM02",
  "2012MM03",
  "2012MM04",
  "2012MM05",
  "2012MM06",
  "2012MM07",
  "2012MM08",
  "2012MM09",
  "2012MM10",
  "2012MM11",
  "2012MM12",
  "2013MM01",
  "2013MM02",
  "2013MM03",
  "2013MM04",
  "2013MM05",
  "2013MM06",
  "2013MM07",
  "2013MM08",
  "2013MM09",
  "2013MM10",
  "2013MM11",
  "2013MM12",
  "2014MM01",
  "2014MM02",
  "2014MM03",
  "2014MM04",
  "2014MM05",
  "2014MM06",
  "2014MM07",
  "2014MM08",
  "2014MM09",
  "2014MM10",
  "2014MM11",
  "2014MM12",
  "2015MM01",
  "2015MM02",
  "2015MM03",
  "2015MM04",
  "2015MM05",
  "2015MM06",
  "2015MM07",
  "2015MM08",
  "2015MM09",
  "2015MM10",
  "2015MM11",
  "2015MM12",
  "2016MM01",
  "2016MM02",
  "2016MM03",
  "2016MM04",
  "2016MM05",
  "2016MM06",
  "2016MM07",
  "2016MM08",
  "2016MM09",
  "2016MM10",
  "2016MM11",
  "2016MM12",
  "2017MM01",
  "2017MM02",
  "2017MM03",
  "2017MM04",
  "2017MM05",
  "2017MM06",
  "2017MM07",
  "2017MM08",
  "2017MM09",
  "2017MM10",
  "2017MM11",
  "2017MM12",
  "2018MM01",
  "2018MM02",
  "2018MM03",
  "2018MM04",
  "2018MM05",
  "2018MM06",
  "2018MM07",
  "2018MM08",
  "2018MM09",
  "2018MM10",
  "2018MM11",
  "2018MM12",
  "2019MM01",
  "2019MM02",
  "2019MM03",
  "2019MM04",
  "2019MM05",
  "2019MM06",
  "2019MM07",
  "2019MM08",
  "2019MM09",
  "2019MM10",
  "2019MM11",
  "2019MM12",
  "2020MM01",
  "2020MM02",
  "2020MM03",
  "2020MM04",
  "2020MM05",
  "2020MM06",
  "2020MM07",
  "2020MM08",
  "2020MM09",
  "2020MM10",
  "2020MM11",
  "2020MM12",
  "2021MM01",
  "2021MM02",
  "2021MM03",
  "2021MM04",
  "2021MM05",
  "2021MM06",
  "2021MM07",
  "2021MM08",
  "2021MM09",
  "2021MM10",
  "2021MM11",
  "2021MM12",
  "2022MM01",
  "2022MM02",
  "2022MM03",
  "2022MM04",
  "2022MM05",
  "2022MM06",
  "2022MM07",
  "2022MM08",
  "2022MM09",
  "2022MM10",
  "2022MM11",
  "2022MM12",
  "2023MM01",
  "2023MM02",
  "2023MM03",
  "2023MM04",
  "2023MM05",
  "2023MM06",
];

const timeDict = {
  "2012MM01": "January 2012",
  "2012MM02": "February 2012",
  "2012MM03": "March 2012",
  "2012MM04": "April 2012",
  "2012MM05": "May 2012",
  "2012MM06": "June 2012",
  "2012MM07": "July 2012",
  "2012MM08": "August 2012",
  "2012MM09": "September 2012",
  "2012MM10": "October 2012",
  "2012MM11": "November 2012",
  "2012MM12": "December 2012",
  "2013MM01": "January 2013",
  "2013MM02": "February 2013",
  "2013MM03": "March 2013",
  "2013MM04": "April 2013",
  "2013MM05": "May 2013",
  "2013MM06": "June 2013",
  "2013MM07": "July 2013",
  "2013MM08": "August 2013",
  "2013MM09": "September 2013",
  "2013MM10": "October 2013",
  "2013MM11": "November 2013",
  "2013MM12": "December 2013",
  "2014MM01": "January 2014",
  "2014MM02": "February 2014",
  "2014MM03": "March 2014",
  "2014MM04": "April 2014",
  "2014MM05": "May 2014",
  "2014MM06": "June 2014",
  "2014MM07": "July 2014",
  "2014MM08": "August 2014",
  "2014MM09": "September 2014",
  "2014MM10": "October 2014",
  "2014MM11": "November 2014",
  "2014MM12": "December 2014",
  "2015MM01": "January 2015",
  "2015MM02": "February 2015",
  "2015MM03": "March 2015",
  "2015MM04": "April 2015",
  "2015MM05": "May 2015",
  "2015MM06": "June 2015",
  "2015MM07": "July 2015",
  "2015MM08": "August 2015",
  "2015MM09": "September 2015",
  "2015MM10": "October 2015",
  "2015MM11": "November 2015",
  "2015MM12": "December 2015",
  "2016MM01": "January 2016",
  "2016MM02": "February 2016",
  "2016MM03": "March 2016",
  "2016MM04": "April 2016",
  "2016MM05": "May 2016",
  "2016MM06": "June 2016",
  "2016MM07": "July 2016",
  "2016MM08": "August 2016",
  "2016MM09": "September 2016",
  "2016MM10": "October 2016",
  "2016MM11": "November 2016",
  "2016MM12": "December 2016",
  "2017MM01": "January 2017",
  "2017MM02": "February 2017",
  "2017MM03": "March 2017",
  "2017MM04": "April 2017",
  "2017MM05": "May 2017",
  "2017MM06": "June 2017",
  "2017MM07": "July 2017",
  "2017MM08": "August 2017",
  "2017MM09": "September 2017",
  "2017MM10": "October 2017",
  "2017MM11": "November 2017",
  "2017MM12": "December 2017",
  "2018MM01": "January 2018",
  "2018MM02": "February 2018",
  "2018MM03": "March 2018",
  "2018MM04": "April 2018",
  "2018MM05": "May 2018",
  "2018MM06": "June 2018",
  "2018MM07": "July 2018",
  "2018MM08": "August 2018",
  "2018MM09": "September 2018",
  "2018MM10": "October 2018",
  "2018MM11": "November 2018",
  "2018MM12": "December 2018",
  "2019MM01": "January 2019",
  "2019MM02": "February 2019",
  "2019MM03": "March 2019",
  "2019MM04": "April 2019",
  "2019MM05": "May 2019",
  "2019MM06": "June 2019",
  "2019MM07": "July 2019",
  "2019MM08": "August 2019",
  "2019MM09": "September 2019",
  "2019MM10": "October 2019",
  "2019MM11": "November 2019",
  "2019MM12": "December 2019",
  "2020MM01": "January 2020",
  "2020MM02": "February 2020",
  "2020MM03": "March 2020",
  "2020MM04": "April 2020",
  "2020MM05": "May 2020",
  "2020MM06": "June 2020",
  "2020MM07": "July 2020",
  "2020MM08": "August 2020",
  "2020MM09": "September 2020",
  "2020MM10": "October 2020",
  "2020MM11": "November 2020",
  "2020MM12": "December 2020",
  "2021MM01": "January 2021",
  "2021MM02": "February 2021",
  "2021MM03": "March 2021",
  "2021MM04": "April 2021",
  "2021MM05": "May 2021",
  "2021MM06": "June 2021",
  "2021MM07": "July 2021",
  "2021MM08": "August 2021",
  "2021MM09": "September 2021",
  "2021MM10": "October 2021",
  "2021MM11": "November 2021",
  "2021MM12": "December 2021",
  "2022MM01": "January 2022",
  "2022MM02": "February 2022",
  "2022MM03": "March 2022",
  "2022MM04": "April 2022",
  "2022MM05": "May 2022",
  "2022MM06": "June 2022",
  "2022MM07": "July 2022",
  "2022MM08": "August 2022",
  "2022MM09": "September 2022",
  "2022MM10": "October 2022",
  "2022MM11": "November 2022",
  "2022MM12": "December 2022",
  "2023MM01": "January 2023",
  "2023MM02": "February 2023",
  "2023MM03": "March 2023",
  "2023MM04": "April 2023",
  "2023MM05": "May 2023",
  "2023MM06": "June 2023",
};

const slider = d3.select("#slider");
const selectedStart = d3.select("#selectedStart");
const selectedEnd = d3.select("#selectedEnd");
const selectedStartMachine = d3.select("#selectedStartMachine");
const selectedEndMachine = d3.select("#selectedEndMachine");
const tooltip = d3.select("#tooltip");
const from = timeArray[0];
const to = timeArray.slice(-1)[0];

$("#slider").ionRangeSlider({
  type: "double",
  values: timeArray,
  onFinish: updateSelectedRange,
  onChange: updateSelectedRange,
  from: from,
  to: to,
  grid: false,
});

function updateSelectedRange(data) {
  const startValue = timeDict[data.from_value];
  const endValue = timeDict[data.to_value];
  selectedStart.text(`Selected Start (Human readable): ${startValue}`);
  selectedEnd.text(`Selected End: (Human readable) ${endValue}`);
  
  selectedStartMachine.text(`Selected Start (Machine readable): ${data.from_value}`);
  selectedEndMachine.text(`Selected End: (Machine readable) ${data.to_value}`);
  

  // Update labels above the slider manually
  const sliderLabels = d3.selectAll(".irs-single, .irs-from, .irs-to");
  const prettyStartValue = vertaal(data.from);
  const prettyEndValue = vertaal(data.to);
  sliderLabels.filter(".irs-single").text(prettyStartValue);
  sliderLabels.filter(".irs-from").text(prettyStartValue);
  sliderLabels.filter(".irs-to").text(prettyEndValue);

  const min = d3.selectAll(".irs-min");
  min.each(function (d, i) {
    const prettyValue = vertaal(i);
    d3.select(this).text(prettyValue);
  });

  const max = d3.selectAll(".irs-max");
  max.each(function (d, i) {
    const prettyValue = vertaal(137);
    d3.select(this).text(prettyValue);
  });
}

function vertaal(value) {
  return timeDict[timeArray[value]];
}

// Manually change the initial values
$('.irs-from').text("January 2012");
$('.irs-to').text("June 2023");